import Vue from"vue";import ContextMenu from"../components/menu.vue";function init(){let t=void 0;return function(){return t=t||function(){const t=new Vue({data(){return{list:[],style:{},visible:!1,callback:void 0,data:void 0}},mounted(){document.addEventListener("click",this.hide)},methods:{show(t,e,i,n){this.list=t,this.style=e,this.visible=!0,this.callback=i,this.data=n},hide(){this.visible=!1}},render(t){return t(ContextMenu,{style:this.style,props:{visible:this.visible,list:this.list},on:{itemClick:t=>{this.hide(),this.callback&&this.callback(t.item,this.data)}}})},beforeDestroy(){document.removeEventListener("click",this.hide)}});var e=t.$mount();return document.body.appendChild(e.$el),e}()}}let instance=void 0;export default{bind(t,s){instance=instance||init()(),t.addEventListener("contextmenu",function(t){var e=s.value;let i=void 0;for(const n in e)if("function"==typeof e[n]){i=e[n];break}instance.show(e.menuList,{left:t.pageX+"px",top:t.pageY+"px"},i,e.data),t.preventDefault(),t.stopPropagation()})},unbind(t){}};